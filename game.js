let secondspergame=120;var name=void 0,human=void 0,assignednumber=0,ishit=!1,cs1=void 0,cs2=void 0,red=document.getElementById("red"),green=document.getElementById("green"),blue=document.getElementById("blue"),gray=document.getElementById("gray"),walls=document.getElementById("walls"),pointsperhit=5,points={red:0,green:0,blue:0},p1={name:"",ishit:!1,xoffset:0,yoffset:0,img:[gray,0,0,0,0],laser:{one:{x:0,y:0},two:{x:0,y:0}}},p2={name:"",ishit:!1,xoffset:0,yoffset:0,img:[gray,0,0,0,0],laser:{one:{x:0,y:0},two:{x:0,y:0}}},p3={name:"",ishit:!1,xoffset:0,yoffset:0,img:[gray,0,0,0,0],laser:{one:{x:0,y:0},two:{x:0,y:0}}},p4={name:"",ishit:!1,xoffset:0,yoffset:0,img:[gray,0,0,0,0],laser:{one:{x:0,y:0},two:{x:0,y:0}}};function start(){var t=[],e=area.width/832;let i=new el("canvas");i.style.backgroundColor="rgb(0,0,0)",i.style.border="3px "+color+" solid";let s=i.getContext("2d"),o=i.width=area.width-6,n=i.height=area.height-6;var f={xoffset:0,yoffset:0},h={back:[],front:[]};var a={left:!1,right:!1,up:!1,down:!1};document.body.onkeydown=function(t){var e=t.key;"w"!==e&&"ArrowUp"!==e||(a.up=!0),"s"!==e&&"ArrowDown"!==e||(a.down=!0),"a"!==e&&"ArrowLeft"!==e||(a.left=!0),"d"!==e&&"ArrowRight"!==e||(a.right=!0)},document.body.onkeyup=function(t){var e=t.key;"w"!==e&&"ArrowUp"!==e||(a.up=!1),"s"!==e&&"ArrowDown"!==e||(a.down=!1),"a"!==e&&"ArrowLeft"!==e||(a.left=!1),"d"!==e&&"ArrowRight"!==e||(a.right=!1)};class l{constructor(e,i,s,o,n){this.ob={},this.ob.color=e,this.ob.x=i,this.ob.y=s,this.ob.w=o,this.ob.h=n,t.push(this.ob)}}class r{constructor(t,e,i){this.half1={},this.half1.x=t,this.half1.y=e,this.half1.w=i.half1[3]*i.scale,this.half1.h=i.half1[4]*i.scale,this.half1.src=i.half1,h.front.push(this.half1),this.half2={},this.half2.x=t,this.half2.y=e+i.half1[4]*i.scale,this.half2.w=i.half2[3]*i.scale,this.half2.h=i.half2[4]*i.scale,this.half2.src=i.half2,this.half2.solid=i.solid,h.back.push(this.half2)}}human=new class{constructor(t,e,i,s,o,n,f,h,a,l,r,m,g,p,y,c,x,d,u,b,w,S,C,k,v,I,T,J,N,O,A,B,E,W,P,R,G,z,D,L,U){this.x=t,this.y=e,this.w=i,this.h=s,this.color=o,"gray"===this.color&&(this.imgSrc=gray),"green"===this.color&&(this.imgSrc=green),"red"===this.color&&(this.imgSrc=red),"blue"===this.color&&(this.imgSrc=blue),this.img={u1:n,u2:f,u3:h,u4:a,u5:l,u6:r,u7:m,u8:g,d1:p,d2:y,d3:c,d4:x,d5:d,d6:u,d7:b,d8:w,l1:N,l2:J,l3:T,l4:I,l5:v,l6:k,l7:C,l8:S,r1:O,r2:A,r3:B,r4:E,r5:W,r6:P,r7:R,r8:G,iu:z,id:D,il:L,ir:U},this.anim={clock:0,step:1},this.walking=!1,this.facing="d",this.Cimg=[]}collide(){for(var e=0;e<h.back.length;e+=1){var i=h.back[e];if(!0===i.solid&&this.x<i.x+i.w&&this.x+this.w>i.x&&this.y<i.y+i.h&&this.y+this.h>i.y){var s=0;for(s=0;s<i.w&&this.x-s<i.x+i.w&&this.x+this.w-s>i.x&&this.y<i.y+i.h&&this.y+this.h>i.y;s+=1);var o=0;for(o=0;o<i.h&&this.x<i.x+i.w&&this.x+this.w>i.x&&this.y-o<i.y+i.h&&this.y+this.h-o>i.y;o+=1);var n=0;for(n=0;n<i.w&&this.x+n<i.x+i.w&&this.x+this.w+n>i.x&&this.y<i.y+i.h&&this.y+this.h>i.y;n+=1);var a=0;for(a=0;a<i.h&&this.x<i.x+i.w&&this.x+this.w>i.x&&this.y+this.h-this.h/10+a<i.y+i.h&&this.y+this.h+a>i.y;a+=1);if(s<o&&s<n&&s<a&&0!=s){for(var l=0;l<t.length;l+=1)t[l].x+=8;for(l=0;l<h.front.length;l+=1)h.front[l].x+=8;for(l=0;l<h.back.length;l+=1)h.back[l].x+=8;f.xoffset-=8}if(o<s&&o<a&&o<n&&0!=o){for(l=0;l<t.length;l+=1)t[l].y+=8;for(l=0;l<h.front.length;l+=1)h.front[l].y+=8;for(l=0;l<h.back.length;l+=1)h.back[l].y+=8;f.yoffset-=8}if(n<a&&n<s&&n<o&&0!=n){for(l=0;l<t.length;l+=1)t[l].x-=8;for(l=0;l<h.front.length;l+=1)h.front[l].x-=8;for(l=0;l<h.back.length;l+=1)h.back[l].x-=8;f.xoffset+=8}if(a<n&&a<o&&a<s&&0!=a){for(l=0;l<t.length;l+=1)t[l].y-=8;for(l=0;l<h.front.length;l+=1)h.front[l].y-=8;for(l=0;l<h.back.length;l+=1)h.back[l].y-=8;f.yoffset+=8}}}}update(){if("green"===this.color&&(this.imgSrc=green),"red"===this.color&&(this.imgSrc=red),"blue"===this.color&&(this.imgSrc=blue),"gray"===this.color&&(this.imgSrc=gray),!0===ishit&&(this.imgSrc=gray),this.anim.clock+=1,this.anim.clock%6==0&&this.anim.clock>0&&(1===this.anim.step?this.anim.step=2:2===this.anim.step?this.anim.step=3:3===this.anim.step?this.anim.step=4:4===this.anim.step?this.anim.step=5:5===this.anim.step?this.anim.step=6:6===this.anim.step?this.anim.step=7:7===this.anim.step?this.anim.step=8:8===this.anim.step&&(this.anim.step=1)),!0===this.walking&&("u"===this.facing&&(1===this.anim.step&&(this.Cimg=this.img.u1),2===this.anim.step&&(this.Cimg=this.img.u2),3===this.anim.step&&(this.Cimg=this.img.u3),4===this.anim.step&&(this.Cimg=this.img.u4),5===this.anim.step&&(this.Cimg=this.img.u5),6===this.anim.step&&(this.Cimg=this.img.u6),7===this.anim.step&&(this.Cimg=this.img.u7),8===this.anim.step&&(this.Cimg=this.img.u8)),"d"===this.facing&&(1===this.anim.step&&(this.Cimg=this.img.d1),2===this.anim.step&&(this.Cimg=this.img.d2),3===this.anim.step&&(this.Cimg=this.img.d3),4===this.anim.step&&(this.Cimg=this.img.d4),5===this.anim.step&&(this.Cimg=this.img.d5),6===this.anim.step&&(this.Cimg=this.img.d6),7===this.anim.step&&(this.Cimg=this.img.d7),8===this.anim.step&&(this.Cimg=this.img.d8)),"l"===this.facing&&(1===this.anim.step&&(this.Cimg=this.img.l1),2===this.anim.step&&(this.Cimg=this.img.l2),3===this.anim.step&&(this.Cimg=this.img.l3),4===this.anim.step&&(this.Cimg=this.img.l4),5===this.anim.step&&(this.Cimg=this.img.l5),6===this.anim.step&&(this.Cimg=this.img.l6),7===this.anim.step&&(this.Cimg=this.img.l7),8===this.anim.step&&(this.Cimg=this.img.l8)),"r"===this.facing&&(1===this.anim.step&&(this.Cimg=this.img.r1),2===this.anim.step&&(this.Cimg=this.img.r2),3===this.anim.step&&(this.Cimg=this.img.r3),4===this.anim.step&&(this.Cimg=this.img.r4),5===this.anim.step&&(this.Cimg=this.img.r5),6===this.anim.step&&(this.Cimg=this.img.r6),7===this.anim.step&&(this.Cimg=this.img.r7),8===this.anim.step&&(this.Cimg=this.img.r8))),!1===this.walking&&("u"===this.facing&&(this.Cimg=this.img.iu),"d"===this.facing&&(this.Cimg=this.img.id),"l"===this.facing&&(this.Cimg=this.img.il),"r"===this.facing&&(this.Cimg=this.img.ir)),!0===a.up||!0===a.down||!0===a.left||!0===a.right?this.walking=!0:this.walking=!1,!0===a.up){this.facing="u";for(var e=0;e<t.length;e+=1)t[e].y+=8;for(e=0;e<h.front.length;e+=1)h.front[e].y+=8;for(e=0;e<h.back.length;e+=1)h.back[e].y+=8;f.yoffset-=8}if(!0===a.down){for(this.facing="d",e=0;e<t.length;e+=1)t[e].y-=8;for(e=0;e<h.front.length;e+=1)h.front[e].y-=8;for(e=0;e<h.back.length;e+=1)h.back[e].y-=8;f.yoffset+=8}if(!0===a.left){for(this.facing="l",e=0;e<t.length;e+=1)t[e].x+=8;for(e=0;e<h.front.length;e+=1)h.front[e].x+=8;for(e=0;e<h.back.length;e+=1)h.back[e].x+=8;f.xoffset-=8}if(!0===a.right){for(this.facing="r",e=0;e<t.length;e+=1)t[e].x-=8;for(e=0;e<h.front.length;e+=1)h.front[e].x-=8;for(e=0;e<h.back.length;e+=1)h.back[e].x-=8;f.xoffset+=8}this.collide()}draw(){s.imageSmoothingEnabled=!1,s.drawImage(this.imgSrc,this.Cimg[0],this.Cimg[1],this.Cimg[2],this.Cimg[3],this.x*e,this.y*e,this.w*e,this.h*e)}}(384.5,184,65,100,"gray",[13,0,13,20],[26,0,13,20],[39,0,13,20],[52,0,13,20],[65,0,13,20],[78,0,13,20],[91,0,13,20],[104,0,13,20],[13,20,13,20],[26,20,13,20],[39,20,13,20],[52,20,13,20],[65,20,13,20],[78,20,13,20],[91,20,13,20],[104,20,13,20],[13,60,13,20],[26,60,13,20],[39,60,13,20],[52,60,13,20],[65,60,13,20],[78,60,13,20],[91,60,13,20],[104,60,13,20],[13,40,13,20],[26,40,13,20],[39,40,13,20],[52,40,13,20],[65,40,13,20],[78,40,13,20],[91,40,13,20],[104,40,13,20],[0,0,13,20],[0,20,13,20],[0,60,13,20],[0,40,13,20]),f.xoffset+=384.5,f.yoffset+=184;let m={half1:[walls,0,35,20,17],half2:[walls,0,52,20,18],solid:!0,scale:5},g={half1:[walls,20,35,20,17],half2:[walls,20,52,20,18],solid:!0,scale:5},p={half1:[walls,40,35,20,17],half2:[walls,40,52,20,18],solid:!0,scale:5},y={half1:[walls,60,35,20,17],half2:[walls,60,52,20,18],solid:!0,scale:5};for(var c=[[1,2,2,2,2,2,2,2,2,2,3],[1,8,8,8,1,2,3,9,9,9,1],[1,8,8,8,1,2,3,9,9,9,1],[1,8,8,8,,,,9,9,9,1],[1,8,8,8,,,,9,9,9,1],[1,,,,,,,,,,1],[1,,,,,,,,,,1],[1,,,,,,,,,,1],[1,,,,,,,,,,1],[1,,,,,,,,,,1],[1,,,,,,,,,,1],[1,2,2,2,,,,2,2,2,3],[,,,1,,,,3,,,],[,,,1,,,,3,,,],[,,,1,,,,3,,,],[1,2,2,2,,,,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,3],[1,,,,,,,,,,,4,,,,,,,,,,,4,,,,,,,,,,,,4,,,,,,,,,,,,3],[1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,3],[1,,,,,,,,,,,,,,,,,,,,,,,,,,,,1,3,,,,,,,,,,,1,2,2,3,,,3],[1,,,4,,,,,,,,,,,1,2,2,2,3,,,,,,,,,,1,3,,,,,,,,,,,,,,,,,3],[1,,,,,,,,,4,,,,,1,2,2,2,3,,,,,,,,,,,,,,,,4,,,,,,,,,,,,3],[1,,,,,,,,,,,,,,1,2,2,2,3,,,,,,4,,,,,,,,,,,,,,,,,4,,,,,3],[1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,4,3],[1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,3],[1,4,,,,,,,,,,,,,,,,,,,,,,,,,,4,,,,,,,,,,,,,,,,,,,3],[1,,,,,4,,,,,,1,3,,,,,,,,,,,,,,,,,,,4,,,,,,,1,2,2,2,2,3,,,3],[1,,,,,,,,,,,1,3,,,,,,,4,,,,,,,,,,,,,,,,,,,1,2,2,2,2,3,,,3],[1,,,,,,,,,,,1,3,,,,,,,,,,,,,1,3,,,,,,,,,,,,1,2,2,2,2,3,,,3],[1,,,,,,,,,,,,,,,,,,,,,,,,,1,3,,,,,,,,,,,,1,2,2,2,2,3,,,3],[1,,,,1,3,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,3],[1,,,,1,3,,,,,,,,,,,,,1,3,,,,,,,,,,,,,,,,,,,,,,,,,,,3],[1,,,,,,,,,,,,4,,,,,,1,3,,,,,,,,,,,,,,,,,4,,,,,,,,,,3],[1,,,,,,,,,,,,,,,,,,,,,,,,,4,,,,,,,,,,,,,,,,,3,,,,3],[1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1,2,3,,,,,,,,,,3,,,4,3],[1,,,,4,,,,,,,,,,,,,,,,,,,,,,,,,,1,2,3,,,,,,,,,,3,,,,3],[1,,,,,,,,,,1,2,2,3,,,,,,4,,,,,,,,,,,1,2,3,,,,,,,1,2,2,3,,,,3],[1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,3],[1,,,,,,,4,,,,,,,,,,,,,,,,,,4,,,,,,,,,,,4,,,,,,,,,,3],[1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,3]],x=0;x<c.length;x+=1)for(var d=0;d<c[x].length;d+=1)1===c[x][d]&&new r(80*d-35,50*x-50,m),2===c[x][d]&&new r(80*d-35,50*x-50,g),3===c[x][d]&&new r(80*d-35,50*x-50,p),4===c[x][d]&&new r(80*d-35,50*x-50,y),8===c[x][d]&&new l("green",80*d-35,50*x-50,80,50),9===c[x][d]&&new l("blue",80*d-35,50*x-50,80,50);function u(t,e){let i=t,s=e;var o=void 0;for(let t=0;t<h.back.length;t+=1){let e=h.back[t];if(!0===e.solid&&i>=e.x&&i<=e.x+e.w&&s>=e.y-10&&s<=e.y+e.h/4){o=!0;break}}if(null!=cs2){let t=p1;i>=t.xoffset-f.xoffset+384.5&&i<=t.xoffset-f.xoffset+384.5+human.w&&s>=t.yoffset-f.yoffset+184&&s<=t.yoffset-f.yoffset+184+human.h&&(p1.color!=human.color&&"gray"!=p1.img[0]&&!1===p1.ishit&&(void 0===cs2[0].connection.channel||"open"===cs2[0].connection.channel.readyState&&cs2[0].send(JSON.stringify({why:"hit",who:"p1",from:human.color})),void 0===cs2[1].connection.channel||"open"===cs2[1].connection.channel.readyState&&cs2[1].send(JSON.stringify({why:"hit",who:"p1",from:human.color})),void 0===cs2[2].connection.channel||"open"===cs2[2].connection.channel.readyState&&cs2[2].send(JSON.stringify({why:"hit",who:"p1",from:human.color}))),o=!0)}{let t=p2;i>=t.xoffset-f.xoffset+384.5&&i<=t.xoffset-f.xoffset+384.5+human.w&&s>=t.yoffset-f.yoffset+184&&s<=t.yoffset-f.yoffset+184+human.h&&(p2.color!=human.color&&"gray"!=p2.img[0]&&!1===p2.ishit&&(null!=cs1&&"open"===cs1[0].channel.readyState&&(cs1[0].send(JSON.stringify({why:"yougothit"})),points[human.color]+=pointsperhit),void 0===cs2||(void 0===cs2[1].connection.channel||"open"===cs2[1].connection.channel.readyState&&cs2[1].send(JSON.stringify({why:"hit",who:"p2",from:human.color})),void 0===cs2[2].connection.channel||"open"===cs2[2].connection.channel.readyState&&cs2[2].send(JSON.stringify({why:"hit",who:"p2",from:human.color})))),o=!0)}{let t=p3;i>=t.xoffset-f.xoffset+384.5&&i<=t.xoffset-f.xoffset+384.5+human.w&&s>=t.yoffset-f.yoffset+184&&s<=t.yoffset-f.yoffset+184+human.h&&(p3.color!=human.color&&"gray"!=p3.img[0]&&!1===p3.ishit&&(null!=cs1&&"open"===cs1[1].channel.readyState&&(cs1[1].send(JSON.stringify({why:"yougothit"})),points[human.color]+=pointsperhit),void 0===cs2||(void 0===cs2[0].connection.channel||"open"===cs2[0].connection.channel.readyState&&cs2[0].send(JSON.stringify({why:"hit",who:"p3",from:human.color})),void 0===cs2[2].connection.channel||"open"===cs2[2].connection.channel.readyState&&cs2[2].send(JSON.stringify({why:"hit",who:"p3",from:human.color})))),o=!0)}{let t=p4;i>=t.xoffset-f.xoffset+384.5&&i<=t.xoffset-f.xoffset+384.5+human.w&&s>=t.yoffset-f.yoffset+184&&s<=t.yoffset-f.yoffset+184+human.h&&(p4.color!=human.color&&"gray"!=p4.img[0]&&!1===p4.ishit&&(null!=cs1&&"open"===cs1[2].channel.readyState&&(cs1[2].send(JSON.stringify({why:"yougothit"})),points[human.color]+=pointsperhit),void 0===cs2||(void 0===cs2[0].connection.channel||"open"===cs2[0].connection.channel.readyState&&cs2[0].send(JSON.stringify({why:"hit",who:"p4",from:human.color})),void 0===cs2[1].connection.channel||"open"===cs2[1].connection.channel.readyState&&cs2[1].send(JSON.stringify({why:"hit",who:"p4",from:human.color})))),o=!0)}return o}var b={p1:{x:0,y:0},p2:{x:0,y:0}},w=!1;i.onmousedown=function(t){if(!1===w&&!1===ishit&&"gray"!=human.color){let n=t.offsetX,f=t.offsetY,h=human.x+human.w/2,a=human.y+human.h/2;var i={x:0,y:0},s={x:0,y:0},o=(a*e-f)/(h*e-n);for(let t=0;t<1e3;t+=1){if(n>h){let e=u(h+1*t,a+1*t*o);if(999===t){s.x=h+1*t,s.y=a+1*t*o;break}if(!0===e){s.x=h+1*t,s.y=a+1*t*o;break}0===t&&(i.x=h+1*t,i.y=a)}if(n<h){let e=u(h-1*t,a+1*-t*o);if(999===t){s.x=h-1*t,s.y=a+1*-t*o;break}if(!0===e){s.x=h-1*t,s.y=a+1*-t*o;break}0===t&&(i.x=h,i.y=a)}}b.p1.x=i.x,b.p1.y=i.y,b.p2.x=s.x,b.p2.y=s.y,setTimeout(function(){b.p1.x=0,b.p1.y=0,b.p2.x=0,b.p2.y=0},25)}w=!0},i.onmouseup=function(){b.p1.x=0,b.p1.y=0,b.p2.x=0,b.p2.y=0,!0===w&&setTimeout(function(){w=!1},25)};let S=setInterval(function(){s.fillStyle="black",s.fillRect(0,0,o,n),color=human.color,human.update();for(let i=0;i<t.length;i+=1){let o=t[i];"green"===o.color?s.fillStyle="rgb(51,255,51)":"blue"===o.color?s.fillStyle="rgb(51,51,255)":"red"===o.color?s.fillStyle="rgb(255,51,51)":s.fillStyle=o.color,s.fillRect(o.x*e,o.y*e,o.w*e,o.h*e),human.x+human.w/2>o.x&&human.y+human.h>o.y&&human.x+human.w/2<o.x+o.w&&human.y+human.h<o.y+o.h&&"gray"===human.color&&(human.color=o.color)}for(var a=0;a<h.back.length;a+=1){var l=(r=h.back[a]).src;s.drawImage(l[0],l[1],l[2],l[3],l[4],r.x*e,r.y*e,r.w*e,r.h*e)}for("green"===p1.img[0]&&s.drawImage(green,p1.img[1],p1.img[2],p1.img[3],p1.img[4],(p1.xoffset-f.xoffset+384.5)*e,(p1.yoffset-f.yoffset+184)*e,65*e,100*e),"red"===p1.img[0]&&s.drawImage(red,p1.img[1],p1.img[2],p1.img[3],p1.img[4],(p1.xoffset-f.xoffset+384.5)*e,(p1.yoffset-f.yoffset+184)*e,65*e,100*e),"blue"===p1.img[0]&&s.drawImage(blue,p1.img[1],p1.img[2],p1.img[3],p1.img[4],(p1.xoffset-f.xoffset+384.5)*e,(p1.yoffset-f.yoffset+184)*e,65*e,100*e),!0!==p1.ishit&&"gray"!==p1.img[0]||s.drawImage(gray,p1.img[1],p1.img[2],p1.img[3],p1.img[4],(p1.xoffset-f.xoffset+384.5)*e,(p1.yoffset-f.yoffset+184)*e,65*e,100*e),s.beginPath(),"green"===p1.img[0]?s.strokeStyle="rgb(51,255,51)":"blue"===p1.img[0]?s.strokeStyle="rgb(51,51,255)":"red"===p1.img[0]&&(s.strokeStyle="rgb(255,51,51)"),s.lineWidth=30*e,s.moveTo((p1.laser.one.x+(p1.xoffset-f.xoffset))*e,(p1.laser.one.y+(p1.yoffset-f.yoffset))*e),s.lineTo((p1.laser.two.x+(p1.xoffset-f.xoffset))*e,(p1.laser.two.y+(p1.yoffset-f.yoffset))*e),s.stroke(),s.fillStyle="rgb(255,255,255)",s.font="bold "+10*e+"pt monospace",s.fillText(""+p1.name,(p1.xoffset-f.xoffset+384.5+human.w/2-4*(p1.name.split("").length-1))*e,(p1.yoffset-f.yoffset+184-10)*e),"green"===p2.img[0]&&s.drawImage(green,p2.img[1],p2.img[2],p2.img[3],p2.img[4],(p2.xoffset-f.xoffset+384.5)*e,(p2.yoffset-f.yoffset+184)*e,65*e,100*e),"red"===p2.img[0]&&s.drawImage(red,p2.img[1],p2.img[2],p2.img[3],p2.img[4],(p2.xoffset-f.xoffset+384.5)*e,(p2.yoffset-f.yoffset+184)*e,65*e,100*e),"blue"===p2.img[0]&&s.drawImage(blue,p2.img[1],p2.img[2],p2.img[3],p2.img[4],(p2.xoffset-f.xoffset+384.5)*e,(p2.yoffset-f.yoffset+184)*e,65*e,100*e),!0!==p2.ishit&&"gray"!==p2.img[0]||s.drawImage(gray,p2.img[1],p2.img[2],p2.img[3],p2.img[4],(p2.xoffset-f.xoffset+384.5)*e,(p2.yoffset-f.yoffset+184)*e,65*e,100*e),s.beginPath(),"green"===p2.img[0]?s.strokeStyle="rgb(51,255,51)":"blue"===p2.img[0]?s.strokeStyle="rgb(51,51,255)":"red"===p2.img[0]&&(s.strokeStyle="rgb(255,51,51)"),s.lineWidth=30*e,s.moveTo((p2.laser.one.x+(p2.xoffset-f.xoffset))*e,(p2.laser.one.y+(p2.yoffset-f.yoffset))*e),s.lineTo((p2.laser.two.x+(p2.xoffset-f.xoffset))*e,(p2.laser.two.y+(p2.yoffset-f.yoffset))*e),s.stroke(),s.fillStyle="rgb(255,255,255)",s.font="bold "+10*e+"pt monospace",s.fillText(""+p2.name,(p2.xoffset-f.xoffset+384.5+human.w/2-4*(p2.name.split("").length-1))*e,(p2.yoffset-f.yoffset+184-10)*e),"green"===p3.img[0]&&s.drawImage(green,p3.img[1],p3.img[2],p3.img[3],p3.img[4],(p3.xoffset-f.xoffset+384.5)*e,(p3.yoffset-f.yoffset+184)*e,65*e,100*e),"red"===p3.img[0]&&s.drawImage(red,p3.img[1],p3.img[2],p3.img[3],p3.img[4],(p3.xoffset-f.xoffset+384.5)*e,(p3.yoffset-f.yoffset+184)*e,65*e,100*e),"blue"===p3.img[0]&&s.drawImage(blue,p3.img[1],p3.img[2],p3.img[3],p3.img[4],(p3.xoffset-f.xoffset+384.5)*e,(p3.yoffset-f.yoffset+184)*e,65*e,100*e),!0!==p3.ishit&&"gray"!==p3.img[0]||s.drawImage(gray,p3.img[1],p3.img[2],p3.img[3],p3.img[4],(p3.xoffset-f.xoffset+384.5)*e,(p3.yoffset-f.yoffset+184)*e,65*e,100*e),s.beginPath(),"green"===p3.img[0]?s.strokeStyle="rgb(51,255,51)":"blue"===p3.img[0]?s.strokeStyle="rgb(51,51,255)":"red"===p3.img[0]&&(s.strokeStyle="rgb(255,51,51)"),s.lineWidth=30*e,s.moveTo((p3.laser.one.x+(p3.xoffset-f.xoffset))*e,(p3.laser.one.y+(p3.yoffset-f.yoffset))*e),s.lineTo((p3.laser.two.x+(p3.xoffset-f.xoffset))*e,(p3.laser.two.y+(p3.yoffset-f.yoffset))*e),s.stroke(),s.fillStyle="rgb(255,255,255)",s.font="bold "+10*e+"pt monospace",s.fillText(""+p3.name,(p3.xoffset-f.xoffset+384.5+human.w/2-4*(p3.name.split("").length-1))*e,(p3.yoffset-f.yoffset+184-10)*e),"green"===p4.img[0]&&s.drawImage(green,p4.img[1],p4.img[2],p4.img[3],p4.img[4],(p4.xoffset-f.xoffset+384.5)*e,(p4.yoffset-f.yoffset+184)*e,65*e,100*e),"red"===p4.img[0]&&s.drawImage(red,p4.img[1],p4.img[2],p4.img[3],p4.img[4],(p4.xoffset-f.xoffset+384.5)*e,(p4.yoffset-f.yoffset+184)*e,65*e,100*e),"blue"===p4.img[0]&&s.drawImage(blue,p4.img[1],p4.img[2],p4.img[3],p4.img[4],(p4.xoffset-f.xoffset+384.5)*e,(p4.yoffset-f.yoffset+184)*e,65*e,100*e),!0!==p4.ishit&&"gray"!==p4.img[0]||s.drawImage(gray,p4.img[1],p4.img[2],p4.img[3],p4.img[4],(p4.xoffset-f.xoffset+384.5)*e,(p4.yoffset-f.yoffset+184)*e,65*e,100*e),s.beginPath(),"green"===p4.img[0]?s.strokeStyle="rgb(51,255,51)":"blue"===p4.img[0]?s.strokeStyle="rgb(51,51,255)":"red"===p4.img[0]&&(s.strokeStyle="rgb(255,51,51)"),s.lineWidth=30*e,s.moveTo((p4.laser.one.x+(p4.xoffset-f.xoffset))*e,(p4.laser.one.y+(p4.yoffset-f.yoffset))*e),s.lineTo((p4.laser.two.x+(p4.xoffset-f.xoffset))*e,(p4.laser.two.y+(p4.yoffset-f.yoffset))*e),s.stroke(),s.fillStyle="rgb(255,255,255)",s.font="bold "+10*e+"pt monospace",s.fillText(""+p4.name,(p4.xoffset-f.xoffset+384.5+human.w/2-4*(p4.name.split("").length-1))*e,(p4.yoffset-f.yoffset+184-10)*e),s.beginPath(),"green"===human.color?s.strokeStyle="rgb(51,255,51)":"blue"===human.color?s.strokeStyle="rgb(51,51,255)":"red"===human.color&&(s.strokeStyle="rgb(255,51,51)"),s.lineWidth=30*e,s.moveTo(b.p1.x*e,b.p1.y*e),s.lineTo(b.p2.x*e,b.p2.y*e),s.stroke(),s.fillStyle="rgb(255,255,255)",s.font="bold "+10*e+"pt monospace",s.fillText(""+name,(human.x+human.w/2-4*(name.split("").length-1))*e,(human.y-10)*e),human.draw(),a=0;a<h.front.length;a+=1){var r;l=(r=h.front[a]).src,s.drawImage(l[0],l[1],l[2],l[3],l[4],r.x*e,r.y*e,r.w*e,r.h*e)}let m=50*e,g=5*e;points.blue>points.green?(s.fillStyle="rgb(51,255,51)",s.font="bold "+m+"pt monospace",s.fillText("Green:"+points.green,0,2*m+g),s.fillStyle="rgb(51,51,255)",s.font="bold "+m+"pt monospace",s.fillText("Blue:"+points.blue,0,m)):(s.fillStyle="rgb(51,255,51)",s.font="bold "+m+"pt monospace",s.fillText("Green:"+points.green,0,m),s.fillStyle="rgb(51,51,255)",s.font="bold "+m+"pt monospace",s.fillText("Blue:"+points.blue,0,2*m+g)),void 0===cs1||("open"===cs1[0].channel.readyState&&cs1[0].send(JSON.stringify({why:"update",points:{red:points.red,green:points.green,blue:points.blue},p1:{name:name,ishit:ishit,xoffset:f.xoffset,yoffset:f.yoffset,img:[human.color,human.Cimg[0],human.Cimg[1],human.Cimg[2],human.Cimg[3]],laser:{one:b.p1,two:b.p2}},p3:{name:p3.name,ishit:p3.ishit,xoffset:p3.xoffset,yoffset:p3.yoffset,img:[p3.img[0],p3.img[1],p3.img[2],p3.img[3],p3.img[4]],laser:p3.laser},p4:{name:p4.name,ishit:p4.ishit,xoffset:p4.xoffset,yoffset:p4.yoffset,img:[p4.img[0],p4.img[1],p4.img[2],p4.img[3],p4.img[4]],laser:p4.laser}})),"open"===cs1[1].channel.readyState&&cs1[1].send(JSON.stringify({why:"update",points:{red:points.red,green:points.green,blue:points.blue},p1:{name:name,ishit:ishit,xoffset:f.xoffset,yoffset:f.yoffset,img:[human.color,human.Cimg[0],human.Cimg[1],human.Cimg[2],human.Cimg[3]],laser:{one:b.p1,two:b.p2}},p2:{name:p2.name,ishit:p2.ishit,xoffset:p2.xoffset,yoffset:p2.yoffset,img:[p2.img[0],p2.img[1],p2.img[2],p2.img[3],p2.img[4]],laser:p2.laser},p4:{name:p4.name,ishit:p4.ishit,xoffset:p4.xoffset,yoffset:p4.yoffset,img:[p4.img[0],p4.img[1],p4.img[2],p4.img[3],p4.img[4]],laser:p4.laser}})),"open"===cs1[2].channel.readyState&&cs1[2].send(JSON.stringify({why:"update",points:{red:points.red,green:points.green,blue:points.blue},p1:{name:name,ishit:ishit,xoffset:f.xoffset,yoffset:f.yoffset,img:[human.color,human.Cimg[0],human.Cimg[1],human.Cimg[2],human.Cimg[3]],laser:{one:b.p1,two:b.p2}},p2:{name:p2.name,ishit:p2.ishit,xoffset:p2.xoffset,yoffset:p2.yoffset,img:[p2.img[0],p2.img[1],p2.img[2],p2.img[3],p2.img[4]],laser:p2.laser},p3:{name:p3.name,ishit:p3.ishit,xoffset:p3.xoffset,yoffset:p3.yoffset,img:[p3.img[0],p3.img[1],p3.img[2],p3.img[3],p3.img[4]],laser:p3.laser}}))),void 0===cs2||(void 0===cs2[0].connection.channel||"open"===cs2[0].connection.channel.readyState&&cs2[0].send(JSON.stringify({why:"update",p2:{name:name,ishit:ishit,xoffset:f.xoffset,yoffset:f.yoffset,img:[human.color,human.Cimg[0],human.Cimg[1],human.Cimg[2],human.Cimg[3]],laser:{one:{x:b.p1.x,y:b.p1.y},two:{x:b.p2.x,y:b.p2.y}}}})),void 0===cs2[1].connection.channel||"open"===cs2[1].connection.channel.readyState&&cs2[1].send(JSON.stringify({why:"update",p3:{name:name,ishit:ishit,xoffset:f.xoffset,yoffset:f.yoffset,img:[human.color,human.Cimg[0],human.Cimg[1],human.Cimg[2],human.Cimg[3]],laser:{one:{x:b.p1.x,y:b.p1.y},two:{x:b.p2.x,y:b.p2.y}}}})),void 0===cs2[2].connection.channel||"open"===cs2[2].connection.channel.readyState&&cs2[2].send(JSON.stringify({why:"update",p4:{name:name,ishit:ishit,xoffset:f.xoffset,yoffset:f.yoffset,img:[human.color,human.Cimg[0],human.Cimg[1],human.Cimg[2],human.Cimg[3]],laser:{one:{x:b.p1.x,y:b.p1.y},two:{x:b.p2.x,y:b.p2.y}}}}))),!1===ishit&&("green"===human.color?i.style.border="3px rgb(51,255,51) solid":"blue"===human.color?i.style.border="3px rgb(51,51,255) solid":"red"===human.color?i.style.border="3px rgb(255,51,51) solid":i.style.border="3px "+human.color+" solid"),!0===ishit&&(document.body.children[8].style.border="3px gray solid")},20);setTimeout(function(){clearInterval(S),s.fillStyle="black",s.fillRect(0,0,o,n);let t=50*e,f=50*e,h=200*e,a=100*e;if(points.blue>points.green?(s.fillStyle="rgb(51,255,51)",s.font="bold "+t+"pt monospace",s.fillText("Green:"+points.green,h,2*t+f+a),s.fillStyle="rgb(51,51,255)",s.font="bold "+t+"pt monospace",s.fillText("Blue:"+points.blue,h,t+a)):(s.fillStyle="rgb(51,255,51)",s.font="bold "+t+"pt monospace",s.fillText("Green:"+points.green,h,t+a),s.fillStyle="rgb(51,51,255)",s.font="bold "+t+"pt monospace",s.fillText("Blue:"+points.blue,h,2*t+f+a)),""===p1.name){let t=new el("div",container);t.style.position="absolute",t.style.zIndex=1,t.style.backgroundColor="rgb(0,30,30)",t.style.width=200*e+"px",t.style.height=100*e+"px",t.style.top=300*e+"px",t.style.left=600*e+"px","green"===human.color?(t.style.color="rgb(51,255,51)",t.style.border="3px rgb(51,255,51) solid"):"blue"===human.color?(t.style.color="rgb(51,51,255)",t.style.border="3px rgb(51,51,255) solid"):"red"===human.color?(t.style.color="rgb(255,51,51)",t.style.border="3px rgb(255,51,51) solid"):"gray"===human.color&&(t.style.color="gray",t.style.border="3px gray solid"),t.style.fontWeight="bold",t.style.fontSize=50*e+"px",t.style.textAlign="center",t.innerText="new game",t.onclick=function(){i.remove(),t.remove(),points={red:0,green:0,blue:0},"open"===cs1[0].channel.readyState&&cs1[0].send("startgame"),"open"===cs1[1].channel.readyState&&cs1[1].send("startgame"),"open"===cs1[2].channel.readyState&&cs1[2].send("startgame"),start()}}},1e3*secondspergame)}
